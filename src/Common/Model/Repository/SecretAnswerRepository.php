<?php

namespace  Common\Model\Repository;


/**
 * SecretAnswerRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class SecretAnswerRepository extends \Doctrine\ORM\EntityRepository
{
    
    //Fetch secret answer for a user (Used in Forgot Password Implemenation)
    public function getAnswerForAQuestion($questionId,$customerId,$role) {
        
        $answer = $this->getEntityManager()
         ->createQuery(
             'SELECT s FROM Model:SecretAnswer s where s.roleId=:cid and s.questionId= :qid and s.role=:role')
             ->setParameter('cid', $customerId)
             ->setParameter('qid', $questionId)
             ->setParameter('role', $role)
             ->getResult(); 
       
        return $answer; 
       
       
    }
    //Fetch secret answer for a user (Used in Customer Profile Updation)
    public function getQuestionAnswer($roleId) {
        $answer = $this->getEntityManager()
        ->createQuery(
            'SELECT s FROM Model:SecretAnswer s where s.roleId=:id')
            ->setParameter('id', $roleId)
            ->getResult();
            return $answer;
                        
    }
    
    
    
}
